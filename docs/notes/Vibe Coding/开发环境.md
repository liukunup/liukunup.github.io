---
title: Dev Stack
tags:
  - ai coding
  - middleware
createTime: 2026/01/14 18:04:28
permalink: /notes/vibe-coding/dev-stack/
---

使用 Vibe Coding 的过程中，通常 IDE 或 TUI 在启动服务时，都需要一整套开发环境，这个文档就是想解决这个问题，让 AI 安安心心只关注写代码就好。

## 部署命令

```shell
# 拉起
docker compose up -d
# 停止
docker compose down
# 拉取镜像
docker compose pull
```

## 配置文件

- .env

```plaintext :collapsed-lines
# Name
COMPOSE_PROJECT_NAME=dev-stack

# Database
DB_NAME=testing
DB_USER=testing
DB_PASSWORD=strong@Pass123!

# PostgreSQL
POSTGRES_PORT=5432

# MySQL
MYSQL_PORT=3306
MYSQL_ROOT_PASSWORD=wZ6try8MCNGi6n8P

# Redis
REDIS_PORT=6379
REDIS_PASSWORD=Ggi057AOL8ZRrvxv

# S3 Compatible Storage
S3_ENDPOINT_PORT=9000
S3_CONSOLE_PORT=9001
S3_ACCESS_KEY=LehXBoVThyyDU3vZ
S3_SECRET_KEY=Ggi057AOL8ZRrvxv
```

- docker-compose.yml

```yaml :collapsed-lines
networks:
  dev-stack:
    driver: bridge

volumes:
  postgresql-data:
  mysql-data:
  redis-data:
  rustfs-data:

services:

  # PostgreSQL
  # https://www.postgresql.org/docs/current/index.html
  postgres:
    image: postgres:18
    restart: unless-stopped
    ports:
      - ${POSTGRES_PORT:-5432}:5432
    environment:
      POSTGRES_USER: ${DB_USER?Variable not set}
      POSTGRES_PASSWORD: ${DB_PASSWORD?Variable not set}
      POSTGRES_DB: ${DB_NAME?Variable not set}
    volumes:
      - postgresql-data:/var/lib/postgresql
    networks:
      - dev-stack
      - default
    healthcheck:
      test: |
        CMD-SHELL
        pg_isready -U $$DB_USER -d $$DB_NAME
      interval: 15s
      timeout: 5s
      retries: 3
      start_period: 30s

  # MySQL
  # https://dev.mysql.com/doc/refman/8.4/en/
  mysql:
    image: mysql:8.4
    restart: unless-stopped
    ports:
      - ${MYSQL_PORT:-3306}:3306
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD?Variable not set}
      MYSQL_USER: ${DB_USER?Variable not set}
      MYSQL_PASSWORD: ${DB_PASSWORD?Variable not set}
      MYSQL_DATABASE: ${DB_NAME?Variable not set}
    volumes:
      - mysql-data:/var/lib/mysql
    networks:
      - dev-stack
      - default
    healthcheck:
      test: |
        CMD-SHELL
        mysqladmin ping -h localhost -u root -p$$MYSQL_ROOT_PASSWORD
      interval: 15s
      timeout: 5s
      retries: 3
      start_period: 30s

  # Redis
  # https://redis.io/docs/latest/operate/oss_and_stack/
  redis:
    image: redis:8.4
    restart: unless-stopped
    command: redis-server --requirepass ${REDIS_PASSWORD?Variable not set}
    ports:
      - ${REDIS_PORT:-6379}:6379
    volumes:
      - redis-data:/data
    networks:
      - dev-stack
      - default
    healthcheck:
      test: |
        CMD-SHELL
        REDISCLI_AUTH=$$REDIS_PASSWORD redis-cli ping | grep -q PONG
      interval: 15s
      timeout: 5s
      retries: 3
      start_period: 30s

  # RustFS
  # https://docs.rustfs.com/installation/docker/
  rustfs:
    image: rustfs/rustfs
    restart: unless-stopped
    command: --console-enable /data
    ports:
      - ${S3_ENDPOINT_PORT:-9000}:9000
      - ${S3_CONSOLE_PORT:-9001}:9001
    environment:
      RUSTFS_CONSOLE_ENABLE: true
      RUSTFS_ACCESS_KEY: ${S3_ACCESS_KEY?Variable not set}
      RUSTFS_SECRET_KEY: ${S3_SECRET_KEY?Variable not set}
    volumes:
      - rustfs-data:/data
    networks:
      - dev-stack
      - default
    healthcheck:
      test: |
        CMD-SHELL
        curl -f http://localhost:9001/health || exit 1
      interval: 15s
      timeout: 5s
      retries: 3
      start_period: 30s
```
