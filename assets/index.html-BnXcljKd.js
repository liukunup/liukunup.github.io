import{_ as a,c as s,e,o as i}from"./app-Dcft7Xc2.js";const l={};function p(t,n){return i(),s("div",null,[...n[0]||(n[0]=[e(`<h2 id="配置openid" tabindex="-1"><a class="header-anchor" href="#配置openid"><span>配置OpenID</span></a></h2><p>authentik <a href="https://integrations.goauthentik.io/monitoring/grafana/" target="_blank" rel="noopener noreferrer">Integrate with Grafana</a></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>networks:</span></span>
<span class="line"><span>  1panel-network:</span></span>
<span class="line"><span>    external: true</span></span>
<span class="line"><span>services:</span></span>
<span class="line"><span>  grafana:</span></span>
<span class="line"><span>    container_name: \${CONTAINER_NAME}</span></span>
<span class="line"><span>    deploy:</span></span>
<span class="line"><span>      resources:</span></span>
<span class="line"><span>        limits:</span></span>
<span class="line"><span>          cpus: \${CPUS}</span></span>
<span class="line"><span>          memory: \${MEMORY_LIMIT}</span></span>
<span class="line"><span>    image: grafana/grafana:12.2.0</span></span>
<span class="line"><span>    labels:</span></span>
<span class="line"><span>      createdBy: Apps</span></span>
<span class="line"><span>    networks:</span></span>
<span class="line"><span>      - 1panel-network</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - \${HOST_IP}:\${PANEL_APP_PORT_HTTP}:3000</span></span>
<span class="line"><span>    restart: always</span></span>
<span class="line"><span>    user: &quot;0&quot;</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - ./data:/var/lib/grafana</span></span>
<span class="line"><span>    environment:</span></span>
<span class="line"><span>      GF_AUTH_GENERIC_OAUTH_ENABLED: &quot;true&quot;</span></span>
<span class="line"><span>      GF_AUTH_GENERIC_OAUTH_NAME: &quot;authentik&quot;</span></span>
<span class="line"><span>      GF_AUTH_GENERIC_OAUTH_CLIENT_ID: &quot;&lt;Client ID from above&gt;&quot;</span></span>
<span class="line"><span>      GF_AUTH_GENERIC_OAUTH_CLIENT_SECRET: &quot;&lt;Client Secret from above&gt;&quot;</span></span>
<span class="line"><span>      GF_AUTH_GENERIC_OAUTH_SCOPES: &quot;openid profile email&quot;</span></span>
<span class="line"><span>      GF_AUTH_GENERIC_OAUTH_AUTH_URL: &quot;https://authentik.company/application/o/authorize/&quot;</span></span>
<span class="line"><span>      GF_AUTH_GENERIC_OAUTH_TOKEN_URL: &quot;https://authentik.company/application/o/token/&quot;</span></span>
<span class="line"><span>      GF_AUTH_GENERIC_OAUTH_API_URL: &quot;https://authentik.company/application/o/userinfo/&quot;</span></span>
<span class="line"><span>      GF_AUTH_SIGNOUT_REDIRECT_URL: &quot;https://authentik.company/application/o/&lt;application_slug&gt;/end-session/&quot;</span></span>
<span class="line"><span>      # Optionally enable auto-login (bypasses Grafana login screen)</span></span>
<span class="line"><span>      GF_AUTH_OAUTH_AUTO_LOGIN: &quot;true&quot;</span></span>
<span class="line"><span>      # Optionally map user groups to Grafana roles</span></span>
<span class="line"><span>      GF_AUTH_GENERIC_OAUTH_ROLE_ATTRIBUTE_PATH: &quot;contains(groups[*], &#39;Grafana Admins&#39;) &amp;&amp; &#39;Admin&#39; || contains(groups[*], &#39;Grafana Editors&#39;) &amp;&amp; &#39;Editor&#39; || &#39;Viewer&#39;&quot;</span></span>
<span class="line"><span>      # Required if Grafana is running behind a reverse proxy</span></span>
<span class="line"><span>      GF_SERVER_ROOT_URL: &quot;https://grafana.company&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>记得到管理页面关闭TLS验证</p>`,4)])])}const d=a(l,[["render",p]]),c=JSON.parse('{"path":"/homelab/deploy/grafana/","title":"Grafana","lang":"zh-CN","frontmatter":{"title":"Grafana","createTime":"2025/10/19 22:22:17","permalink":"/homelab/deploy/grafana/"},"readingTime":{"minutes":0.47,"words":141},"git":{"createdTime":1760884067000,"updatedTime":1760884067000,"contributors":[{"name":"LiuKun/Windows","username":"","email":"liukunup@163.com","commits":1,"avatar":"https://gravatar.com/avatar/93adde9a3709e088c6c4b0bd8763791893e8be4840a992204be1ac5d20e50f0c?d=retro"}]},"filePathRelative":"homelab/2.部署指南/grafana.md","headers":[]}');export{d as comp,c as data};
