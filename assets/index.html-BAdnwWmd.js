import{_ as k,c as r,d as t,a as d,w as e,r as p,o,b as s,e as i}from"./app-BxVB_gzI.js";const c={};function g(y,a){const h=p("Tabs");return o(),r("div",null,[a[4]||(a[4]=t('<h2 id="ğŸš€-éƒ¨ç½²æŒ‡å—" tabindex="-1"><a class="header-anchor" href="#ğŸš€-éƒ¨ç½²æŒ‡å—"><span>ğŸš€ éƒ¨ç½²æŒ‡å—</span></a></h2><p>Keycloak æ˜¯ä¸€ä¸ªå¼€æºçš„èº«ä»½å’Œè®¿é—®ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="å‡†å¤‡å·¥ä½œ" tabindex="-1"><a class="header-anchor" href="#å‡†å¤‡å·¥ä½œ"><span>å‡†å¤‡å·¥ä½œ</span></a></h3><p>åˆ›å»ºç”¨äºå­˜å‚¨æ•°æ®åº“æ•°æ®çš„æŒä¹…åŒ–ç›®å½•</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /share/Container/keycloak/db</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="å¯åŠ¨æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨æœåŠ¡"><span>å¯åŠ¨æœåŠ¡</span></a></h3>',6)),d(h,{id:"16",data:[{id:"Docker Compose (æ¨è)"},{id:"Docker CLI (å¼€å‘æ¨¡å¼)"}],active:0},{title0:e(({value:l,isActive:n})=>[...a[0]||(a[0]=[i("Docker Compose (æ¨è)",-1)])]),title1:e(({value:l,isActive:n})=>[...a[1]||(a[1]=[i("Docker CLI (å¼€å‘æ¨¡å¼)",-1)])]),tab0:e(({value:l,isActive:n})=>[...a[2]||(a[2]=[s("p",null,"ä½¿ç”¨ Docker Compose éƒ¨ç½² Keycloak å’Œ PostgreSQL æ•°æ®åº“ï¼Œç¡®ä¿æ•°æ®æŒä¹…åŒ–ã€‚",-1),s("div",{class:"language-yaml line-numbers-mode","data-highlighter":"shiki","data-ext":"yaml",style:{"--shiki-light":"#393a34","--shiki-dark":"#dbd7caee","--shiki-light-bg":"#ffffff","--shiki-dark-bg":"#121212"}},[s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",{class:"language-yaml"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"services"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"  keycloak"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    image"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," quay.io/keycloak/keycloak:26.5.0")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    restart"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," unless-stopped")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    command"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," start")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    ports"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      -"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," 8080:8080")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    environment"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      KC_DB"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," postgres")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      KC_DB_URL"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," jdbc:postgresql://postgres:5432/keycloak")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      KC_DB_USERNAME"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," keycloak")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      KC_DB_PASSWORD"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," password")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      KC_BOOTSTRAP_ADMIN_USERNAME"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," admin")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      KC_BOOTSTRAP_ADMIN_PASSWORD"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," admin")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    depends_on"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      -"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," postgres")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"  postgres"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    image"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," postgres")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    restart"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," unless-stopped")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    environment"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      POSTGRES_DB"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," keycloak")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      POSTGRES_USER"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," keycloak")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      POSTGRES_PASSWORD"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," password")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    volumes"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      -"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," /share/Container/keycloak/db:/var/lib/postgresql")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),tab1:e(({value:l,isActive:n})=>[...a[3]||(a[3]=[s("p",null,"å¿«é€Ÿå¯åŠ¨å¼€å‘æ¨¡å¼ï¼Œå³ä½¿é‡å¯æ•°æ®ä¹Ÿä¼šä¸¢å¤±ï¼ˆå› ä¸ºä½¿ç”¨å†…å­˜ H2 æ•°æ®åº“ï¼‰ï¼Œä»…ä¾›æµ‹è¯•ä½¿ç”¨ã€‚",-1),s("div",{class:"language-bash line-numbers-mode","data-highlighter":"shiki","data-ext":"bash",style:{"--shiki-light":"#393a34","--shiki-dark":"#dbd7caee","--shiki-light-bg":"#ffffff","--shiki-dark-bg":"#121212"}},[s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"docker"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," run"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -d"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}},"  -p"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," 8080:8080"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}},"  -e"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," KC_BOOTSTRAP_ADMIN_USERNAME=admin"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}},"  -e"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," KC_BOOTSTRAP_ADMIN_PASSWORD=admin"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}},"  --restart"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," unless-stopped"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}},"  --name"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," keycloak"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}},"  quay.io/keycloak/keycloak:26.5.0"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}},"  start-dev")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])]),_:1}),a[5]||(a[5]=t('<h2 id="ğŸ“-åˆå§‹é…ç½®" tabindex="-1"><a class="header-anchor" href="#ğŸ“-åˆå§‹é…ç½®"><span>ğŸ“ åˆå§‹é…ç½®</span></a></h2><h3 id="_1-ç™»å½•ç®¡ç†æ§åˆ¶å°" tabindex="-1"><a class="header-anchor" href="#_1-ç™»å½•ç®¡ç†æ§åˆ¶å°"><span>1. ç™»å½•ç®¡ç†æ§åˆ¶å°</span></a></h3><ol><li>æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/admin" target="_blank" rel="noopener noreferrer">http://localhost:8080/admin</a>ã€‚</li><li>ä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­é…ç½®çš„ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼ˆDocker Compose ç¤ºä¾‹ä¸­ä¸º <code>admin</code> / <code>admin</code>ï¼‰ã€‚</li></ol><h3 id="_2-åˆ›å»º-realm-é¢†åŸŸ" tabindex="-1"><a class="header-anchor" href="#_2-åˆ›å»º-realm-é¢†åŸŸ"><span>2. åˆ›å»º Realm (é¢†åŸŸ)</span></a></h3><p>Keycloak ä¸­çš„ Realm ç›¸å½“äºä¸€ä¸ªç§Ÿæˆ·ç©ºé—´ã€‚<code>master</code> realm ä»…ç”¨äºç®¡ç† Keycloak æœ¬èº«ï¼Œä¸å»ºè®®ç”¨äºä¸šåŠ¡åº”ç”¨ã€‚</p><ol><li>ç™»å½•åï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„ <strong>Master</strong> ä¸‹æ‹‰èœå•ã€‚</li><li>é€‰æ‹© <strong>Create Realm</strong>ã€‚</li><li>åœ¨ <strong>Realm name</strong> è¾“å…¥æ¡†ä¸­å¡«å†™åç§°ï¼Œä¾‹å¦‚ <code>myrealm</code>ã€‚</li><li>ç‚¹å‡» <strong>Create</strong> æŒ‰é’®ã€‚</li></ol><h3 id="_3-åˆ›å»ºç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#_3-åˆ›å»ºç”¨æˆ·"><span>3. åˆ›å»ºç”¨æˆ·</span></a></h3><ol><li>ç¡®ä¿å·¦ä¸Šè§’æ˜¾ç¤ºçš„å½“å‰ Realm æ˜¯ä½ åˆšåˆ›å»ºçš„ <code>myrealm</code>ã€‚</li><li>ç‚¹å‡»å·¦ä¾§èœå•çš„ <strong>Users</strong>ã€‚</li><li>ç‚¹å‡» <strong>Create new user</strong>ã€‚</li><li>å¡«å†™ <strong>Username</strong>ï¼ˆå¦‚ <code>myuser</code>ï¼‰ï¼Œå…¶ä»–ä¿¡æ¯å¯é€‰ï¼Œç‚¹å‡» <strong>Create</strong>ã€‚</li><li>è®¾ç½®å¯†ç ï¼š <ul><li>ç‚¹å‡»ç”¨æˆ·è¯¦æƒ…é¡µé¡¶éƒ¨çš„ <strong>Credentials</strong> æ ‡ç­¾ã€‚</li><li>ç‚¹å‡» <strong>Set password</strong>ã€‚</li><li>è¾“å…¥å¯†ç å¹¶ç¡®è®¤ã€‚</li><li>å°† <strong>Temporary</strong> é€‰é¡¹å…³é—­ï¼ˆoffï¼‰ï¼Œå¦åˆ™ç”¨æˆ·é¦–æ¬¡ç™»å½•æ—¶ä¼šè¢«å¼ºåˆ¶è¦æ±‚ä¿®æ”¹å¯†ç ã€‚</li><li>ç‚¹å‡» <strong>Save</strong>ã€‚</li></ul></li></ol><h3 id="_4-éªŒè¯é…ç½®" tabindex="-1"><a class="header-anchor" href="#_4-éªŒè¯é…ç½®"><span>4. éªŒè¯é…ç½®</span></a></h3><ol><li>è®¿é—®ç”¨æˆ·è´¦æˆ·æ§åˆ¶å°ï¼š<a href="http://localhost:8080/realms/myrealm/account" target="_blank" rel="noopener noreferrer">http://localhost:8080/realms/myrealm/account</a>ã€‚</li><li>ä½¿ç”¨åˆšæ‰åˆ›å»ºçš„æ™®é€šç”¨æˆ·ï¼ˆ<code>myuser</code>ï¼‰ç™»å½•ã€‚</li><li>å¦‚æœèƒ½æˆåŠŸè¿›å…¥è´¦æˆ·ç®¡ç†é¡µé¢ï¼Œè¯´æ˜ Keycloak åŸºç¡€é…ç½®å·²å®Œæˆã€‚</li></ol><h2 id="ğŸ”—-å‚è€ƒé“¾æ¥" tabindex="-1"><a class="header-anchor" href="#ğŸ”—-å‚è€ƒé“¾æ¥"><span>ğŸ”— å‚è€ƒé“¾æ¥</span></a></h2><ul><li><a href="https://www.keycloak.org/" target="_blank" rel="noopener noreferrer">Keycloak å®˜æ–¹ç½‘ç«™</a></li><li><a href="https://www.keycloak.org/getting-started/getting-started-docker" target="_blank" rel="noopener noreferrer">Keycloak Docker å…¥é—¨æŒ‡å—</a></li></ul>',12))])}const u=k(c,[["render",g]]),b=JSON.parse('{"path":"/homelab/deploy/keycloak/","title":"Keycloak","lang":"zh-CN","frontmatter":{"title":"Keycloak","tags":["IdP"],"createTime":"2026/01/12 09:52:09","permalink":"/homelab/deploy/keycloak/"},"readingTime":{"minutes":1.74,"words":523},"git":{"createdTime":1768200356000,"updatedTime":1768211580000,"contributors":[{"name":"LiuKun","username":"LiuKun","email":"liukunup@163.com","commits":2,"avatar":"https://avatars.githubusercontent.com/LiuKun?v=4","url":"https://github.com/LiuKun"}]},"filePathRelative":"homelab/2.éƒ¨ç½²æŒ‡å—/keycloak.md","headers":[]}');export{u as comp,b as data};
